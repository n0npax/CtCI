sudo: false

matrix:
  include:
    - language: python
      python: 3.8
      env:
        - PYTHONDONTWRITEBYTECODE=true
      before_script:
        - pip install codecov pytest pytest-cov black bandit
      script:
        - python3 -m black --check -q .
        - bandit -r . -x $(find . -name "test_*.py" | tr "\n" ",")
        - find . -name __pycache__ -type d -exec rm -fr {} \;
        - python3 -m pytest --cov-report=xml --cov . .
        - codecov --file coverage.xml
